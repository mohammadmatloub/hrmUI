<p-toolbar> </p-toolbar>
<div class="ag-theme-alpine" style="width: 100%">
  <ag-grid-angular
    (gridReady)="onGridReady($event)"
    [columnDefs]="columns$ | async"
    [gridOptions]="gridOptions"
  ></ag-grid-angular>
</div>
<p-dialog [(visible)]="createDialog" [modal]="true">
  <app-personnel-attendance-form
    [attendance]="selectedAttendance"
    (save)="createAttendance($event)"
    (cancel)="onCancel()"
  >
  </app-personnel-attendance-form>
</p-dialog>

<p-dialog [(visible)]="importyDialog" [modal]="true">
  <app-personnel-attendance-importer
    [organizationList]="organizationList"
    [yearList]="yearList"
    [monthList]="monthList"
    [occupationList]="occupationList"
    (save)="createAttendance($event)"
    (cancel)="onCancel()"
  >
  </app-personnel-attendance-importer>
</p-dialog>

<p-dialog
  header="نمایش جزییات"
  [resizable]="false"
  [modal]="true"
  [maximizable]="true"
  appendTo="body"
  [(visible)]="detailDialog"
  [style]="{ width: '75vw' }"
  [contentStyle]="{ height: '300px' }"
>
  <p-table
    [value]="detailsList"
    [scrollable]="true"
    scrollHeight="flex"
    [tableStyle]="{ 'min-width': '50rem' }"
  >
    <ng-template #header>
      <tr>
        <th>عنوان شغلي</th>
        <th>تعداد پرسنل حاضر</th>
        <th>ساعت هاي كاركرد</th>
        <th>دقيقه هاي كاركرد</th>
        <th>جمع كاركرد</th>

        <th>اضافه كار با ضريب</th>
        <th>اضافه كار بدون ضريب</th>

        <th>تعداد روزهاي اضافه كار</th>
        <th>ساعت هاي اضافه كار</th>
        <th>دقيقه هاي اضافه كار</th>
        <th>جمع اضافه كار</th>
      </tr>
    </ng-template>
    <ng-template #body let-detail>
      <tr>
        <td>{{ detail.occupation.name }}</td>

        <td>{{ detail.attendanceCount }}</td>
        <td>{{ detail.totalHoursWorked }}</td>
        <td>{{ detail.totalMinutesWorked }}</td>
        <td>{{ detail.totalWorked }}</td>

        <td>{{ detail.overtimeWithMultiplier }}</td>
        <td>{{ detail.overtimeWithOutMultiplier }}</td>

        <td>{{ detail.overtimeDaysWorked }}</td>
        <td>{{ detail.overtimeHoursWorked }}</td>
        <td>{{ detail.overtimeMinutesWorked }}</td>
        <td>{{ detail.overtimeTotalWorked }}</td>
      </tr>
    </ng-template>
  </p-table>
</p-dialog>
